var app=new Vue({el:"#sub",data:{manage:!1,stripe:"",domain:window.location,email:""},mounted(){this.stripe=Stripe(this.$refs.checkoutKey.value)},methods:{showManage:function(){this.manage=!this.manage},subscribe:function(e){priceId=e.target.getAttribute("data-plan-id"),requireShipping=e.target.getAttribute("data-shipping");var t={lineItems:[{price:priceId,quantity:1}],successUrl:this.domain+"?success=1&session_id={CHECKOUT_SESSION_ID}",cancelUrl:this.domain+"?canceled=1",mode:"subscription"};"true"!=requireShipping&&1!=requireShipping||(t.shippingAddressCollection={allowedCountries:["AC","AD","AE","AF","AG","AI","AL","AM","AO","AQ","AR","AT","AU","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BQ","BR","BS","BT","BV","BW","BY","BZ","CA","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CV","CW","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","EH","ER","ES","ET","FI","FJ","FK","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MF","MG","MK","ML","MM","MN","MO","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","SS","ST","SV","SX","SZ","TA","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","US","UY","UZ","VA","VC","VE","VG","VN","VU","WF","WS","XK","YE","YT","ZA","ZM","ZW","ZZ"]}),this.stripe.redirectToCheckout(t).then(handleResult)},validEmail:function(e){if(this.isEmpty(e))return!1;return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},isEmpty:function(e){return!e||/^\s*$/.test(e)},handleResult:function(e){e.error&&(document.getElementById("error-message").textContent=e.error.message)},redirectManage:function(e){axios.post("/customer",{email:encodeURIComponent(e),csrf:this.$refs.inputCsrf.value}).then(e=>{this.isEmpty(e.data.location)?alert("No subscriptions found with this email."):window.location=e.data.location})}}});
